"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{1786:function(t,e,i){function r(){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}}).apply(this,arguments)}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function s(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=u(t);if(e){var n=u(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return h(t)}(this,i)}}function h(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e,i){return(e=p(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function c(){c=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,r=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,i){return t[e]=i}}function u(t,e,i,n){var s,a,o=Object.create((e&&e.prototype instanceof d?e:d).prototype);return r(o,"_invoke",{value:(s=new S(n||[]),a="suspendedStart",function(e,r){if("executing"===a)throw Error("Generator is already running");if("completed"===a){if("throw"===e)throw r;return A()}for(s.method=e,s.arg=r;;){var n=s.delegate;if(n){var o=function t(e,i){var r=i.method,n=e.iterator[r];if(void 0===n)return i.delegate=null,"throw"===r&&e.iterator.return&&(i.method="return",i.arg=void 0,t(e,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=TypeError("The iterator does not provide a '"+r+"' method")),f;var s=l(n,e.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,f;var a=s.arg;return a?a.done?(i[e.resultName]=a.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=void 0),i.delegate=null,f):a:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,f)}(n,s);if(o){if(o===f)continue;return o}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===a)throw a="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);a="executing";var h=l(t,i,s);if("normal"===h.type){if(a=s.done?"completed":"suspendedYield",h.arg===f)continue;return{value:h.arg,done:s.done}}"throw"===h.type&&(a="completed",s.method="throw",s.arg=h.arg)}})}),o}function l(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function d(){}function m(){}function p(){}var v={};h(v,s,function(){return this});var x=Object.getPrototypeOf,g=x&&x(x(_([])));g&&g!==e&&i.call(g,s)&&(v=g);var k=p.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach(function(e){h(t,e,function(t){return this._invoke(e,t)})})}function M(t,e){var n;r(this,"_invoke",{value:function(r,s){function a(){return new e(function(n,a){!function r(n,s,a,o){var h=l(t[n],t,s);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==y(c)&&i.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,o)},function(t){r("throw",t,a,o)}):e.resolve(c).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,o)})}o(h.arg)}(r,s,n,a)})}return n=n?n.then(a,a):a()}})}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function _(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:A}}function A(){return{value:void 0,done:!0}}return m.prototype=p,r(k,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=h(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,h(t,o,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},b(M.prototype),h(M.prototype,a,function(){return this}),t.AsyncIterator=M,t.async=function(e,i,r,n,s){void 0===s&&(s=Promise);var a=new M(u(e,i,r,n),s);return t.isGeneratorFunction(i)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(k),h(k,o,"Generator"),h(k,s,function(){return this}),h(k,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=_,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(i,r){return a.type="throw",a.arg=t,e.next=i,r&&(e.method="next",e.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),h=i.call(s,"finallyLoc");if(o&&h){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=e,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),z(i),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;z(i)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:_(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),f}},t}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function m(t,e,i){return e&&d(t.prototype,e),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){var e=function(t,e){if("object"!==y(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==y(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===y(e)?e:String(e)}i.d(e,{FI:function(){return ii},FM:function(){return P},Il:function(){return eu},Kj:function(){return eH},Lt:function(){return tt},P:function(){return ti},TU:function(){return ib},WM:function(){return g},Wz:function(){return ie},ZA:function(){return e7},_1:function(){return e6},ce:function(){return ig},dp:function(){return ih},kB:function(){return it},u9:function(){return eA},vB:function(){return ef},vp:function(){return e9},wk:function(){return k}});var v,x,g=2,k=1023,b="srgb",M="srgb-linear",w="display-p3-linear",z="linear",S="srgb",_="rec709",A=function(){function t(){f(this,t)}return m(t,[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}},{key:"hasEventListener",value:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var i=this._listeners[t];if(void 0!==i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=e.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,t);t.target=null}}}}]),t}(),T=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],C=Math.PI/180,E=180/Math.PI;function B(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(T[255&t]+T[t>>8&255]+T[t>>16&255]+T[t>>24&255]+"-"+T[255&e]+T[e>>8&255]+"-"+T[e>>16&15|64]+T[e>>24&255]+"-"+T[63&i|128]+T[i>>8&255]+"-"+T[i>>16&255]+T[i>>24&255]+T[255&r]+T[r>>8&255]+T[r>>16&255]+T[r>>24&255]).toLowerCase()}function O(t,e,i){return Math.max(e,Math.min(i,t))}function F(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw Error("Invalid component type.")}}function R(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw Error("Invalid component type.")}}var P=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,e),e.prototype.isVector2=!0,this.x=t,this.y=i}return m(e,[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:Math.acos(O(this.dot(t)/e,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=this.x-t.x,s=this.y-t.y;return this.x=n*i-s*r+t.x,this.y=n*r+s*i+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:t,value:c().mark(function t(){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:case"end":return t.stop()}},t,this)})}]),e}(Symbol.iterator),I=function(){function t(e,i,r,n,s,a,o,h,u){f(this,t),t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,i,r,n,s,a,o,h,u)}return m(t,[{key:"set",value:function(t,e,i,r,n,s,a,o,h){var u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=n,u[5]=o,u[6]=i,u[7]=s,u[8]=h,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}},{key:"extractBasis",value:function(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var i=t.elements,r=e.elements,n=this.elements,s=i[0],a=i[3],o=i[6],h=i[1],u=i[4],l=i[7],c=i[2],y=i[5],f=i[8],d=r[0],m=r[3],p=r[6],v=r[1],x=r[4],g=r[7],k=r[2],b=r[5],M=r[8];return n[0]=s*d+a*v+o*k,n[3]=s*m+a*x+o*b,n[6]=s*p+a*g+o*M,n[1]=h*d+u*v+l*k,n[4]=h*m+u*x+l*b,n[7]=h*p+u*g+l*M,n[2]=c*d+y*v+f*k,n[5]=c*m+y*x+f*b,n[8]=c*p+y*g+f*M,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8];return e*s*u-e*a*h-i*n*u+i*a*o+r*n*h-r*s*o}},{key:"invert",value:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8],l=u*s-a*h,c=a*o-u*n,y=h*n-s*o,f=e*l+i*c+r*y;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var d=1/f;return t[0]=l*d,t[1]=(r*h-u*i)*d,t[2]=(a*i-r*s)*d,t[3]=c*d,t[4]=(u*e-r*o)*d,t[5]=(r*n-a*e)*d,t[6]=y*d,t[7]=(i*o-h*e)*d,t[8]=(s*e-i*n)*d,this}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:"setUvTransform",value:function(t,e,i,r,n,s,a){var o=Math.cos(n),h=Math.sin(n);return this.set(i*o,i*h,-i*(o*s+h*a)+s+t,-r*h,r*o,-r*(-h*s+o*a)+a+e,0,0,1),this}},{key:"scale",value:function(t,e){return this.premultiply(N.makeScale(t,e)),this}},{key:"rotate",value:function(t){return this.premultiply(N.makeRotation(-t)),this}},{key:"translate",value:function(t,e){return this.premultiply(N.makeTranslation(t,e)),this}},{key:"makeTranslation",value:function(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}},{key:"makeRotation",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}},{key:"makeScale",value:function(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}},{key:"equals",value:function(t){for(var e=this.elements,i=t.elements,r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<9;i++)this.elements[i]=t[i+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}}]),t}(),N=new I;function L(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}var j={};function V(t){t in j||(j[t]=!0,console.warn(t))}var W=new I().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),q=new I().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),U=(l(v={},M,{transfer:z,primaries:_,toReference:function(t){return t},fromReference:function(t){return t}}),l(v,b,{transfer:S,primaries:_,toReference:function(t){return t.convertSRGBToLinear()},fromReference:function(t){return t.convertLinearToSRGB()}}),l(v,w,{transfer:z,primaries:"p3",toReference:function(t){return t.applyMatrix3(q)},fromReference:function(t){return t.applyMatrix3(W)}}),l(v,"display-p3",{transfer:S,primaries:"p3",toReference:function(t){return t.convertSRGBToLinear().applyMatrix3(q)},fromReference:function(t){return t.applyMatrix3(W).convertLinearToSRGB()}}),v),D=new Set([M,w]),H={enabled:!0,_workingColorSpace:M,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(colorSpace){if(!D.has(colorSpace))throw Error('Unsupported working color space, "'.concat(colorSpace,'".'));this._workingColorSpace=colorSpace},convert:function(t,e,i){if(!1===this.enabled||e===i||!e||!i)return t;var r=U[e].toReference;return(0,U[i].fromReference)(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return U[t].primaries},getTransfer:function(t){return""===t?z:U[t].transfer}};function X(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function J(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var Y=function(){function t(){f(this,t)}return m(t,null,[{key:"getDataURL",value:function(t){if(/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===x&&(x=L("canvas")),x.width=t.width,x.height=t.height;var e,i=x.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=x}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var e=L("canvas");e.width=t.width,e.height=t.height;var i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);for(var r=i.getImageData(0,0,t.width,t.height),n=r.data,s=0;s<n.length;s++)n[s]=255*X(n[s]/255);return i.putImageData(r,0,0),e}if(!t.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t;for(var a=t.data.slice(0),o=0;o<a.length;o++)a instanceof Uint8Array||a instanceof Uint8ClampedArray?a[o]=Math.floor(255*X(a[o]/255)):a[o]=X(a[o]);return{data:a,width:t.width,height:t.height}}}]),t}(),Z=0,G=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;f(this,t),this.isSource=!0,Object.defineProperty(this,"id",{value:Z++}),this.uuid=B(),this.data=e,this.dataReady=!0,this.version=0}return m(t,[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"toJSON",value:function(t){var e,i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.images[this.uuid])return t.images[this.uuid];var r={uuid:this.uuid,url:""},n=this.data;if(null!==n){if(Array.isArray(n)){e=[];for(var s=0,a=n.length;s<a;s++)n[s].isDataTexture?e.push(Q(n[s].image)):e.push(Q(n[s]))}else e=Q(n);r.url=e}return i||(t.images[this.uuid]=r),r}}]),t}();function Q(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Y.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var $=0,K=function(t){s(i,t);var e=o(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.DEFAULT_IMAGE,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.DEFAULT_MAPPING,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:k,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,y=arguments.length>8&&void 0!==arguments[8]?arguments[8]:i.DEFAULT_ANISOTROPY,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"";return f(this,i),(t=e.call(this)).isTexture=!0,Object.defineProperty(h(t),"id",{value:$++}),t.uuid=B(),t.name="",t.source=new G(r),t.mipmaps=[],t.mapping=n,t.channel=0,t.wrapS=s,t.wrapT=a,t.magFilter=o,t.minFilter=u,t.anisotropy=y,t.format=l,t.internalFormat=null,t.type=c,t.offset=new P(0,0),t.repeat=new P(1,1),t.center=new P(0,0),t.rotation=0,t.matrixAutoUpdate=!0,t.matrix=new I,t.generateMipmaps=!0,t.premultiplyAlpha=!1,t.flipY=!0,t.unpackAlignment=4,"string"==typeof d?t.colorSpace=d:(V("THREE.Texture: Property .encoding has been replaced by .colorSpace."),t.colorSpace=3001===d?b:""),t.userData={},t.version=0,t.onUpdate=null,t.isRenderTargetTexture=!1,t.needsPMREMUpdate=!1,t}return m(i,[{key:"image",get:function(){return this.source.data},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=t}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}},{key:"needsUpdate",set:function(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}},{key:"encoding",get:function(){return V("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===b?3001:3e3},set:function(t){V("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===t?b:""}}]),i}(A);K.DEFAULT_IMAGE=null,K.DEFAULT_MAPPING=300,K.DEFAULT_ANISOTROPY=1;var tt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;f(this,e),e.prototype.isVector4=!0,this.x=t,this.y=i,this.z=r,this.w=n}return m(e,[{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}},{key:"set",value:function(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"applyMatrix4",value:function(t){var e=this.x,i=this.y,r=this.z,n=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*n,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"setAxisAngleFromQuaternion",value:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}},{key:"setAxisAngleFromRotationMatrix",value:function(t){var e,i,r,n=t.elements,s=n[0],a=n[4],o=n[8],h=n[1],u=n[5],l=n[9],c=n[2],y=n[6],f=n[10];if(.01>Math.abs(a-h)&&.01>Math.abs(o-c)&&.01>Math.abs(l-y)){if(.1>Math.abs(a+h)&&.1>Math.abs(o+c)&&.1>Math.abs(l+y)&&.1>Math.abs(s+u+f-3))return this.set(1,0,0,0),this;var d=(s+1)/2,m=(u+1)/2,p=(f+1)/2,v=(a+h)/4,x=(o+c)/4,g=(l+y)/4;return d>m&&d>p?d<.01?(e=0,i=.707106781,r=.707106781):(i=v/(e=Math.sqrt(d)),r=x/e):m>p?m<.01?(e=.707106781,i=0,r=.707106781):(e=v/(i=Math.sqrt(m)),r=g/i):p<.01?(e=.707106781,i=.707106781,r=0):(e=x/(r=Math.sqrt(p)),i=g/r),this.set(e,i,r,Math.PI),this}var k=Math.sqrt((y-l)*(y-l)+(o-c)*(o-c)+(h-a)*(h-a));return .001>Math.abs(k)&&(k=1),this.x=(y-l)/k,this.y=(o-c)/k,this.z=(h-a)/k,this.w=Math.acos((s+u+f-1)/2),this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}},{key:"lerpVectors",value:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}},{key:"fromBufferAttribute",value:function(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:t,value:c().mark(function t(){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:return t.next=8,this.w;case 8:case"end":return t.stop()}},t,this)})}]),e}(Symbol.iterator),te=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;f(this,e),this.isQuaternion=!0,this._x=t,this._y=i,this._z=r,this._w=n}return m(e,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},{key:"set",value:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=t._x,r=t._y,n=t._z,s=t._order,a=Math.cos,o=Math.sin,h=a(i/2),u=a(r/2),l=a(n/2),c=o(i/2),y=o(r/2),f=o(n/2);switch(s){case"XYZ":this._x=c*u*l+h*y*f,this._y=h*y*l-c*u*f,this._z=h*u*f+c*y*l,this._w=h*u*l-c*y*f;break;case"YXZ":this._x=c*u*l+h*y*f,this._y=h*y*l-c*u*f,this._z=h*u*f-c*y*l,this._w=h*u*l+c*y*f;break;case"ZXY":this._x=c*u*l-h*y*f,this._y=h*y*l+c*u*f,this._z=h*u*f+c*y*l,this._w=h*u*l-c*y*f;break;case"ZYX":this._x=c*u*l-h*y*f,this._y=h*y*l+c*u*f,this._z=h*u*f-c*y*l,this._w=h*u*l+c*y*f;break;case"YZX":this._x=c*u*l+h*y*f,this._y=h*y*l+c*u*f,this._z=h*u*f-c*y*l,this._w=h*u*l-c*y*f;break;case"XZY":this._x=c*u*l-h*y*f,this._y=h*y*l-c*u*f,this._z=h*u*f+c*y*l,this._w=h*u*l+c*y*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=t.elements,i=e[0],r=e[4],n=e[8],s=e[1],a=e[5],o=e[9],h=e[2],u=e[6],l=e[10],c=i+a+l;if(c>0){var y=.5/Math.sqrt(c+1);this._w=.25/y,this._x=(u-o)*y,this._y=(n-h)*y,this._z=(s-r)*y}else if(i>a&&i>l){var f=2*Math.sqrt(1+i-a-l);this._w=(u-o)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(n+h)/f}else if(a>l){var d=2*Math.sqrt(1+a-i-l);this._w=(n-h)/d,this._x=(r+s)/d,this._y=.25*d,this._z=(o+u)/d}else{var m=2*Math.sqrt(1+l-i-a);this._w=(s-r)/m,this._x=(n+h)/m,this._y=(o+u)/m,this._z=.25*m}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=i,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(O(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var i=this.angleTo(t);return 0===i||this.slerp(t,Math.min(1,e/i)),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(t){return this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var i=t._x,r=t._y,n=t._z,s=t._w,a=e._x,o=e._y,h=e._z,u=e._w;return this._x=i*u+s*a+r*h-n*o,this._y=r*u+s*o+n*a-i*h,this._z=n*u+s*h+i*o-r*a,this._w=s*u-i*a-r*o-n*h,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,r=this._y,n=this._z,s=this._w,a=s*t._w+i*t._x+r*t._y+n*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;var o=1-a*a;if(o<=Number.EPSILON){var h=1-e;return this._w=h*s+e*this._w,this._x=h*i+e*this._x,this._y=h*r+e*this._y,this._z=h*n+e*this._z,this.normalize(),this}var u=Math.sqrt(o),l=Math.atan2(u,a),c=Math.sin((1-e)*l)/u,y=Math.sin(e*l)/u;return this._w=s*c+this._w*y,this._x=i*c+this._x*y,this._y=r*c+this._y*y,this._z=n*c+this._z*y,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(t,e,i){return this.copy(t).slerp(e,i)}},{key:"random",value:function(){var t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),r=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(e*Math.cos(r),i*Math.sin(n),i*Math.cos(n),e*Math.sin(r))}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"fromBufferAttribute",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:t,value:c().mark(function t(){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._x;case 2:return t.next=4,this._y;case 4:return t.next=6,this._z;case 6:return t.next=8,this._w;case 8:case"end":return t.stop()}},t,this)})}],[{key:"slerpFlat",value:function(t,e,i,r,n,s,a){var o=i[r+0],h=i[r+1],u=i[r+2],l=i[r+3],c=n[s+0],y=n[s+1],f=n[s+2],d=n[s+3];if(0===a){t[e+0]=o,t[e+1]=h,t[e+2]=u,t[e+3]=l;return}if(1===a){t[e+0]=c,t[e+1]=y,t[e+2]=f,t[e+3]=d;return}if(l!==d||o!==c||h!==y||u!==f){var m=1-a,p=o*c+h*y+u*f+l*d,v=p>=0?1:-1,x=1-p*p;if(x>Number.EPSILON){var g=Math.sqrt(x),k=Math.atan2(g,p*v);m=Math.sin(m*k)/g,a=Math.sin(a*k)/g}var b=a*v;if(o=o*m+c*b,h=h*m+y*b,u=u*m+f*b,l=l*m+d*b,m===1-a){var M=1/Math.sqrt(o*o+h*h+u*u+l*l);o*=M,h*=M,u*=M,l*=M}}t[e]=o,t[e+1]=h,t[e+2]=u,t[e+3]=l}},{key:"multiplyQuaternionsFlat",value:function(t,e,i,r,n,s){var a=i[r],o=i[r+1],h=i[r+2],u=i[r+3],l=n[s],c=n[s+1],y=n[s+2],f=n[s+3];return t[e]=a*f+u*l+o*y-h*c,t[e+1]=o*f+u*c+h*l-a*y,t[e+2]=h*f+u*y+a*c-o*l,t[e+3]=u*f-a*l-o*c-h*y,t}}]),e}(Symbol.iterator),ti=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;f(this,e),e.prototype.isVector3=!0,this.x=t,this.y=i,this.z=r}return m(e,[{key:"set",value:function(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return this.applyQuaternion(tn.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(tn.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6]*r,this.y=n[1]*e+n[4]*i+n[7]*r,this.z=n[2]*e+n[5]*i+n[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements,s=1/(n[3]*e+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*e+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*e+n[6]*i+n[10]*r+n[14])*s,this}},{key:"applyQuaternion",value:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,a=t.z,o=t.w,h=2*(s*r-a*i),u=2*(a*e-n*r),l=2*(n*i-s*e);return this.x=e+o*h+s*l-a*u,this.y=i+o*u+a*h-n*l,this.z=r+o*l+n*u-s*h,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*r,this.y=n[1]*e+n[5]*i+n[9]*r,this.z=n[2]*e+n[6]*i+n[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}},{key:"cross",value:function(t){return this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var i=t.x,r=t.y,n=t.z,s=e.x,a=e.y,o=e.z;return this.x=r*o-n*a,this.y=n*s-i*o,this.z=i*a-r*s,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}},{key:"projectOnPlane",value:function(t){return tr.copy(this).projectOnVector(t),this.sub(tr)}},{key:"reflect",value:function(t){return this.sub(tr.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:Math.acos(O(this.dot(t)/e,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"setFromEuler",value:function(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}},{key:"setFromColor",value:function(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,i=Math.sqrt(1-Math.pow(t,2));return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}},{key:t,value:c().mark(function t(){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:case"end":return t.stop()}},t,this)})}]),e}(Symbol.iterator),tr=new ti,tn=new te,ts=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ti(Infinity,Infinity,Infinity),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ti(-1/0,-1/0,-1/0);f(this,t),this.isBox3=!0,this.min=e,this.max=i}return m(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromArray",value:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e+=3)this.expandByPoint(to.fromArray(t,e));return this}},{key:"setFromBufferAttribute",value:function(t){this.makeEmpty();for(var e=0,i=t.count;e<i;e++)this.expandByPoint(to.fromBufferAttribute(t,e));return this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var i=to.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}},{key:"setFromObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(t,e)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.updateWorldMatrix(!1,!1);var i=t.geometry;if(void 0!==i){var r=i.getAttribute("position");if(!0===e&&void 0!==r&&!0!==t.isInstancedMesh)for(var n=0,s=r.count;n<s;n++)!0===t.isMesh?t.getVertexPosition(n,to):to.fromBufferAttribute(r,n),to.applyMatrix4(t.matrixWorld),this.expandByPoint(to);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),th.copy(t.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),th.copy(i.boundingBox)),th.applyMatrix4(t.matrixWorld),this.union(th)}for(var a=t.children,o=0,h=a.length;o<h;o++)this.expandByObject(a[o],e);return this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x)&&!(t.x>this.max.x)&&!(t.y<this.min.y)&&!(t.y>this.max.y)&&!(t.z<this.min.z)&&!(t.z>this.max.z)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x)&&!(t.min.x>this.max.x)&&!(t.max.y<this.min.y)&&!(t.min.y>this.max.y)&&!(t.max.z<this.min.z)&&!(t.min.z>this.max.z)}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,to),to.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}},{key:"intersectsTriangle",value:function(t){if(this.isEmpty())return!1;this.getCenter(tm),tp.subVectors(this.max,tm),tu.subVectors(t.a,tm),tl.subVectors(t.b,tm),tc.subVectors(t.c,tm),ty.subVectors(tl,tu),tf.subVectors(tc,tl),td.subVectors(tu,tc);var e=[0,-ty.z,ty.y,0,-tf.z,tf.y,0,-td.z,td.y,ty.z,0,-ty.x,tf.z,0,-tf.x,td.z,0,-td.x,-ty.y,ty.x,0,-tf.y,tf.x,0,-td.y,td.x,0];return!!(tg(e,tu,tl,tc,tp)&&tg(e=[1,0,0,0,1,0,0,0,1],tu,tl,tc,tp))&&(tv.crossVectors(ty,tf),tg(e=[tv.x,tv.y,tv.z],tu,tl,tc,tp))}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return this.clampPoint(t,to).distanceTo(t)}},{key:"getBoundingSphere",value:function(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(to).length()),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(ta[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ta[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ta[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ta[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ta[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ta[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ta[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ta[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ta)),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}(),ta=[new ti,new ti,new ti,new ti,new ti,new ti,new ti,new ti],to=new ti,th=new ts,tu=new ti,tl=new ti,tc=new ti,ty=new ti,tf=new ti,td=new ti,tm=new ti,tp=new ti,tv=new ti,tx=new ti;function tg(t,e,i,r,n){for(var s=0,a=t.length-3;s<=a;s+=3){tx.fromArray(t,s);var o=n.x*Math.abs(tx.x)+n.y*Math.abs(tx.y)+n.z*Math.abs(tx.z),h=e.dot(tx),u=i.dot(tx),l=r.dot(tx);if(Math.max(-Math.max(h,u,l),Math.min(h,u,l))>o)return!1}return!0}var tk=new ts,tb=new ti,tM=new ti,tw=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ti,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;f(this,t),this.isSphere=!0,this.center=e,this.radius=i}return m(t,[{key:"set",value:function(t,e){return this.center.copy(t),this.radius=e,this}},{key:"setFromPoints",value:function(t,e){var i=this.center;void 0!==e?i.copy(e):tk.setFromPoints(t).getCenter(i);for(var r=0,n=0,s=t.length;n<s;n++)r=Math.max(r,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,e){var i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}},{key:"getBoundingBox",value:function(t){return this.isEmpty()?t.makeEmpty():(t.set(this.center,this.center),t.expandByScalar(this.radius)),t}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"expandByPoint",value:function(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;tb.subVectors(t,this.center);var e=tb.lengthSq();if(e>this.radius*this.radius){var i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(tb,r/i),this.radius+=r}return this}},{key:"union",value:function(t){return t.isEmpty()||(this.isEmpty()?this.copy(t):!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(tM.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(tb.copy(t.center).add(tM)),this.expandByPoint(tb.copy(t.center).sub(tM)))),this}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),t}(),tz=new ti,tS=new ti,t_=new ti,tA=new ti,tT=new ti,tC=new ti,tE=new ti,tB=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ti,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ti(0,0,-1);f(this,t),this.origin=e,this.direction=i}return m(t,[{key:"set",value:function(t,e){return this.origin.copy(t),this.direction.copy(e),this}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,tz)),this}},{key:"closestPointToPoint",value:function(t,e){e.subVectors(t,this.origin);var i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=tz.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(tz.copy(this.origin).addScaledVector(this.direction,e),tz.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,e,i,r){tS.copy(t).add(e).multiplyScalar(.5),t_.copy(e).sub(t).normalize(),tA.copy(this.origin).sub(tS);var n,s,a,o,h=.5*t.distanceTo(e),u=-this.direction.dot(t_),l=tA.dot(this.direction),c=-tA.dot(t_),y=tA.lengthSq(),f=Math.abs(1-u*u);if(f>0){if(n=u*c-l,s=u*l-c,o=h*f,n>=0){if(s>=-o){if(s<=o){var d=1/f;n*=d,s*=d,a=n*(n+u*s+2*l)+s*(u*n+s+2*c)+y}else a=-(n=Math.max(0,-(u*(s=h)+l)))*n+s*(s+2*c)+y}else a=-(n=Math.max(0,-(u*(s=-h)+l)))*n+s*(s+2*c)+y}else s<=-o?(s=(n=Math.max(0,-(-u*h+l)))>0?-h:Math.min(Math.max(-h,-c),h),a=-n*n+s*(s+2*c)+y):s<=o?(n=0,a=(s=Math.min(Math.max(-h,-c),h))*(s+2*c)+y):(s=(n=Math.max(0,-(u*h+l)))>0?h:Math.min(Math.max(-h,-c),h),a=-n*n+s*(s+2*c)+y)}else s=u>0?-h:h,a=-(n=Math.max(0,-(u*s+l)))*n+s*(s+2*c)+y;return i&&i.copy(this.origin).addScaledVector(this.direction,n),r&&r.copy(tS).addScaledVector(t_,s),a}},{key:"intersectSphere",value:function(t,e){tz.subVectors(t.center,this.origin);var i=tz.dot(this.direction),r=tz.dot(tz)-i*i,n=t.radius*t.radius;if(r>n)return null;var s=Math.sqrt(n-r),a=i-s,o=i+s;return o<0?null:a<0?this.at(o,e):this.at(a,e)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}},{key:"intersectPlane",value:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}},{key:"intersectsPlane",value:function(t){var e=t.distanceToPoint(this.origin);return!!(0===e||t.normal.dot(this.direction)*e<0)}},{key:"intersectBox",value:function(t,e){var i,r,n,s,a,o,h=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,c=this.origin;return(h>=0?(i=(t.min.x-c.x)*h,r=(t.max.x-c.x)*h):(i=(t.max.x-c.x)*h,r=(t.min.x-c.x)*h),u>=0?(n=(t.min.y-c.y)*u,s=(t.max.y-c.y)*u):(n=(t.max.y-c.y)*u,s=(t.min.y-c.y)*u),i>s||n>r)?null:((n>i||isNaN(i))&&(i=n),(s<r||isNaN(r))&&(r=s),l>=0?(a=(t.min.z-c.z)*l,o=(t.max.z-c.z)*l):(a=(t.max.z-c.z)*l,o=(t.min.z-c.z)*l),i>o||a>r)?null:((a>i||i!=i)&&(i=a),(o<r||r!=r)&&(r=o),r<0)?null:this.at(i>=0?i:r,e)}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,tz)}},{key:"intersectTriangle",value:function(t,e,i,r,n){tT.subVectors(e,t),tC.subVectors(i,t),tE.crossVectors(tT,tC);var s,a=this.direction.dot(tE);if(a>0){if(r)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}tA.subVectors(this.origin,t);var o=s*this.direction.dot(tC.crossVectors(tA,tC));if(o<0)return null;var h=s*this.direction.dot(tT.cross(tA));if(h<0||o+h>a)return null;var u=-s*tA.dot(tE);return u<0?null:this.at(u/a,n)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),t}(),tO=function(){function t(e,i,r,n,s,a,o,h,u,l,c,y,d,m,p,v){f(this,t),t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,i,r,n,s,a,o,h,u,l,c,y,d,m,p,v)}return m(t,[{key:"set",value:function(t,e,i,r,n,s,a,o,h,u,l,c,y,f,d,m){var p=this.elements;return p[0]=t,p[4]=e,p[8]=i,p[12]=r,p[1]=n,p[5]=s,p[9]=a,p[13]=o,p[2]=h,p[6]=u,p[10]=l,p[14]=c,p[3]=y,p[7]=f,p[11]=d,p[15]=m,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return new t().fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}},{key:"setFromMatrix3",value:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var e=this.elements,i=t.elements,r=1/tF.setFromMatrixColumn(t,0).length(),n=1/tF.setFromMatrixColumn(t,1).length(),s=1/tF.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){var e=this.elements,i=t.x,r=t.y,n=t.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(r),h=Math.sin(r),u=Math.cos(n),l=Math.sin(n);if("XYZ"===t.order){var c=s*u,y=s*l,f=a*u,d=a*l;e[0]=o*u,e[4]=-o*l,e[8]=h,e[1]=y+f*h,e[5]=c-d*h,e[9]=-a*o,e[2]=d-c*h,e[6]=f+y*h,e[10]=s*o}else if("YXZ"===t.order){var m=o*u,p=o*l,v=h*u,x=h*l;e[0]=m+x*a,e[4]=v*a-p,e[8]=s*h,e[1]=s*l,e[5]=s*u,e[9]=-a,e[2]=p*a-v,e[6]=x+m*a,e[10]=s*o}else if("ZXY"===t.order){var g=o*u,k=o*l,b=h*u,M=h*l;e[0]=g-M*a,e[4]=-s*l,e[8]=b+k*a,e[1]=k+b*a,e[5]=s*u,e[9]=M-g*a,e[2]=-s*h,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){var w=s*u,z=s*l,S=a*u,_=a*l;e[0]=o*u,e[4]=S*h-z,e[8]=w*h+_,e[1]=o*l,e[5]=_*h+w,e[9]=z*h-S,e[2]=-h,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){var A=s*o,T=s*h,C=a*o,E=a*h;e[0]=o*u,e[4]=E-A*l,e[8]=C*l+T,e[1]=l,e[5]=s*u,e[9]=-a*u,e[2]=-h*u,e[6]=T*l+C,e[10]=A-E*l}else if("XZY"===t.order){var B=s*o,O=s*h,F=a*o,R=a*h;e[0]=o*u,e[4]=-l,e[8]=h*u,e[1]=B*l+R,e[5]=s*u,e[9]=O*l-F,e[2]=F*l-O,e[6]=a*u,e[10]=R*l+B}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(tP,t,tI)}},{key:"lookAt",value:function(t,e,i){var r=this.elements;return tj.subVectors(t,e),0===tj.lengthSq()&&(tj.z=1),tj.normalize(),tN.crossVectors(i,tj),0===tN.lengthSq()&&(1===Math.abs(i.z)?tj.x+=1e-4:tj.z+=1e-4,tj.normalize(),tN.crossVectors(i,tj)),tN.normalize(),tL.crossVectors(tj,tN),r[0]=tN.x,r[4]=tL.x,r[8]=tj.x,r[1]=tN.y,r[5]=tL.y,r[9]=tj.y,r[2]=tN.z,r[6]=tL.z,r[10]=tj.z,this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var i=t.elements,r=e.elements,n=this.elements,s=i[0],a=i[4],o=i[8],h=i[12],u=i[1],l=i[5],c=i[9],y=i[13],f=i[2],d=i[6],m=i[10],p=i[14],v=i[3],x=i[7],g=i[11],k=i[15],b=r[0],M=r[4],w=r[8],z=r[12],S=r[1],_=r[5],A=r[9],T=r[13],C=r[2],E=r[6],B=r[10],O=r[14],F=r[3],R=r[7],P=r[11],I=r[15];return n[0]=s*b+a*S+o*C+h*F,n[4]=s*M+a*_+o*E+h*R,n[8]=s*w+a*A+o*B+h*P,n[12]=s*z+a*T+o*O+h*I,n[1]=u*b+l*S+c*C+y*F,n[5]=u*M+l*_+c*E+y*R,n[9]=u*w+l*A+c*B+y*P,n[13]=u*z+l*T+c*O+y*I,n[2]=f*b+d*S+m*C+p*F,n[6]=f*M+d*_+m*E+p*R,n[10]=f*w+d*A+m*B+p*P,n[14]=f*z+d*T+m*O+p*I,n[3]=v*b+x*S+g*C+k*F,n[7]=v*M+x*_+g*E+k*R,n[11]=v*w+x*A+g*B+k*P,n[15]=v*z+x*T+g*O+k*I,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],s=t[1],a=t[5],o=t[9],h=t[13],u=t[2],l=t[6],c=t[10],y=t[14];return t[3]*(+n*o*l-r*h*l-n*a*c+i*h*c+r*a*y-i*o*y)+t[7]*(+e*o*y-e*h*c+n*s*c-r*s*y+r*h*u-n*o*u)+t[11]*(+e*h*l-e*a*y-n*s*l+i*s*y+n*a*u-i*h*u)+t[15]*(-r*a*u-e*o*l+e*a*c+r*s*l-i*s*c+i*o*u)}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setPosition",value:function(t,e,i){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}},{key:"invert",value:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8],l=t[9],c=t[10],y=t[11],f=t[12],d=t[13],m=t[14],p=t[15],v=l*m*h-d*c*h+d*o*y-a*m*y-l*o*p+a*c*p,x=f*c*h-u*m*h-f*o*y+s*m*y+u*o*p-s*c*p,g=u*d*h-f*l*h+f*a*y-s*d*y-u*a*p+s*l*p,k=f*l*o-u*d*o-f*a*c+s*d*c+u*a*m-s*l*m,b=e*v+i*x+r*g+n*k;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var M=1/b;return t[0]=v*M,t[1]=(d*c*n-l*m*n-d*r*y+i*m*y+l*r*p-i*c*p)*M,t[2]=(a*m*n-d*o*n+d*r*h-i*m*h-a*r*p+i*o*p)*M,t[3]=(l*o*n-a*c*n-l*r*h+i*c*h+a*r*y-i*o*y)*M,t[4]=x*M,t[5]=(u*m*n-f*c*n+f*r*y-e*m*y-u*r*p+e*c*p)*M,t[6]=(f*o*n-s*m*n-f*r*h+e*m*h+s*r*p-e*o*p)*M,t[7]=(s*c*n-u*o*n+u*r*h-e*c*h-s*r*y+e*o*y)*M,t[8]=g*M,t[9]=(f*l*n-u*d*n-f*i*y+e*d*y+u*i*p-e*l*p)*M,t[10]=(s*d*n-f*a*n+f*i*h-e*d*h-s*i*p+e*a*p)*M,t[11]=(u*a*n-s*l*n-u*i*h+e*l*h+s*i*y-e*a*y)*M,t[12]=k*M,t[13]=(u*d*r-f*l*r+f*i*c-e*d*c-u*i*m+e*l*m)*M,t[14]=(f*a*r-s*d*r-f*i*o+e*d*o+s*i*m-e*a*m)*M,t[15]=(s*l*r-u*a*r+u*i*o-e*l*o-s*i*c+e*a*c)*M,this}},{key:"scale",value:function(t){var e=this.elements,i=t.x,r=t.y,n=t.z;return e[0]*=i,e[4]*=r,e[8]*=n,e[1]*=i,e[5]*=r,e[9]*=n,e[2]*=i,e[6]*=r,e[10]*=n,e[3]*=i,e[7]*=r,e[11]*=n,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}},{key:"makeTranslation",value:function(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=1-i,s=t.x,a=t.y,o=t.z,h=n*s,u=n*a;return this.set(h*s+i,h*a-r*o,h*o+r*a,0,h*a+r*o,u*a+i,u*o-r*s,0,h*o-r*a,u*o+r*s,n*o*o+i,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,i,r,n,s){return this.set(1,i,n,0,t,1,s,0,e,r,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,i){var r=this.elements,n=e._x,s=e._y,a=e._z,o=e._w,h=n+n,u=s+s,l=a+a,c=n*h,y=n*u,f=n*l,d=s*u,m=s*l,p=a*l,v=o*h,x=o*u,g=o*l,k=i.x,b=i.y,M=i.z;return r[0]=(1-(d+p))*k,r[1]=(y+g)*k,r[2]=(f-x)*k,r[3]=0,r[4]=(y-g)*b,r[5]=(1-(c+p))*b,r[6]=(m+v)*b,r[7]=0,r[8]=(f+x)*M,r[9]=(m-v)*M,r[10]=(1-(c+d))*M,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}},{key:"decompose",value:function(t,e,i){var r=this.elements,n=tF.set(r[0],r[1],r[2]).length(),s=tF.set(r[4],r[5],r[6]).length(),a=tF.set(r[8],r[9],r[10]).length();0>this.determinant()&&(n=-n),t.x=r[12],t.y=r[13],t.z=r[14],tR.copy(this);var o=1/n,h=1/s,u=1/a;return tR.elements[0]*=o,tR.elements[1]*=o,tR.elements[2]*=o,tR.elements[4]*=h,tR.elements[5]*=h,tR.elements[6]*=h,tR.elements[8]*=u,tR.elements[9]*=u,tR.elements[10]*=u,e.setFromRotationMatrix(tR),i.x=n,i.y=s,i.z=a,this}},{key:"makePerspective",value:function(t,e,i,r,n,s){var a,o,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2e3,u=this.elements;if(2e3===h)a=-(s+n)/(s-n),o=-2*s*n/(s-n);else if(2001===h)a=-s/(s-n),o=-s*n/(s-n);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return u[0]=2*n/(e-t),u[4]=0,u[8]=(e+t)/(e-t),u[12]=0,u[1]=0,u[5]=2*n/(i-r),u[9]=(i+r)/(i-r),u[13]=0,u[2]=0,u[6]=0,u[10]=a,u[14]=o,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}},{key:"makeOrthographic",value:function(t,e,i,r,n,s){var a,o,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2e3,u=this.elements,l=1/(e-t),c=1/(i-r),y=1/(s-n);if(2e3===h)a=(s+n)*y,o=-2*y;else if(2001===h)a=n*y,o=-1*y;else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return u[0]=2*l,u[4]=0,u[8]=0,u[12]=-((e+t)*l),u[1]=0,u[5]=2*c,u[9]=0,u[13]=-((i+r)*c),u[2]=0,u[6]=0,u[10]=o,u[14]=-a,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,i=t.elements,r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<16;i++)this.elements[i]=t[i+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}]),t}(),tF=new ti,tR=new tO,tP=new ti(0,0,0),tI=new ti(1,1,1),tN=new ti,tL=new ti,tj=new ti,tV=new tO,tW=new te,tq=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DEFAULT_ORDER;f(this,e),this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=n}return m(e,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},{key:"set",value:function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=i,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=t.elements,n=r[0],s=r[4],a=r[8],o=r[1],h=r[5],u=r[9],l=r[2],c=r[6],y=r[10];switch(e){case"XYZ":this._y=Math.asin(O(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(-u,y),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(c,h),this._z=0);break;case"YXZ":this._x=Math.asin(-O(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(a,y),this._z=Math.atan2(o,h)):(this._y=Math.atan2(-l,n),this._z=0);break;case"ZXY":this._x=Math.asin(O(c,-1,1)),.9999999>Math.abs(c)?(this._y=Math.atan2(-l,y),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-O(l,-1,1)),.9999999>Math.abs(l)?(this._x=Math.atan2(c,y),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-s,h));break;case"YZX":this._z=Math.asin(O(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-u,h),this._y=Math.atan2(-l,n)):(this._x=0,this._y=Math.atan2(a,y));break;case"XZY":this._z=Math.asin(-O(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(c,h),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-u,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(t,e,i){return tV.makeRotationFromQuaternion(t),this.setFromRotationMatrix(tV,e,i)}},{key:"setFromVector3",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}},{key:"reorder",value:function(t){return tW.setFromEuler(this),this.setFromQuaternion(tW,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:t,value:c().mark(function t(){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._x;case 2:return t.next=4,this._y;case 4:return t.next=6,this._z;case 6:return t.next=8,this._order;case 8:case"end":return t.stop()}},t,this)})}]),e}(Symbol.iterator);tq.DEFAULT_ORDER="XYZ";var tU=function(){function t(){f(this,t),this.mask=1}return m(t,[{key:"set",value:function(t){this.mask=(1<<t|0)>>>0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return(this.mask&t.mask)!=0}},{key:"isEnabled",value:function(t){return(this.mask&(1<<t|0))!=0}}]),t}(),tD=0,tH=new ti,tX=new te,tJ=new tO,tY=new ti,tZ=new ti,tG=new ti,tQ=new te,t$=new ti(1,0,0),tK=new ti(0,1,0),t0=new ti(0,0,1),t1={type:"added"},t2={type:"removed"},t3=function(t){s(i,t);var e=o(i);function i(){f(this,i),(t=e.call(this)).isObject3D=!0,Object.defineProperty(h(t),"id",{value:tD++}),t.uuid=B(),t.name="",t.type="Object3D",t.parent=null,t.children=[],t.up=i.DEFAULT_UP.clone();var t,r=new ti,n=new tq,s=new te,a=new ti(1,1,1);return n._onChange(function(){s.setFromEuler(n,!1)}),s._onChange(function(){n.setFromQuaternion(s,void 0,!1)}),Object.defineProperties(h(t),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new tO},normalMatrix:{value:new I}}),t.matrix=new tO,t.matrixWorld=new tO,t.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,t.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,t.matrixWorldNeedsUpdate=!1,t.layers=new tU,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.renderOrder=0,t.animations=[],t.userData={},t}return m(i,[{key:"onBeforeShadow",value:function(){}},{key:"onAfterShadow",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(t){return this.quaternion.premultiply(t),this}},{key:"setRotationFromAxisAngle",value:function(t,e){this.quaternion.setFromAxisAngle(t,e)}},{key:"setRotationFromEuler",value:function(t){this.quaternion.setFromEuler(t,!0)}},{key:"setRotationFromMatrix",value:function(t){this.quaternion.setFromRotationMatrix(t)}},{key:"setRotationFromQuaternion",value:function(t){this.quaternion.copy(t)}},{key:"rotateOnAxis",value:function(t,e){return tX.setFromAxisAngle(t,e),this.quaternion.multiply(tX),this}},{key:"rotateOnWorldAxis",value:function(t,e){return tX.setFromAxisAngle(t,e),this.quaternion.premultiply(tX),this}},{key:"rotateX",value:function(t){return this.rotateOnAxis(t$,t)}},{key:"rotateY",value:function(t){return this.rotateOnAxis(tK,t)}},{key:"rotateZ",value:function(t){return this.rotateOnAxis(t0,t)}},{key:"translateOnAxis",value:function(t,e){return tH.copy(t).applyQuaternion(this.quaternion),this.position.add(tH.multiplyScalar(e)),this}},{key:"translateX",value:function(t){return this.translateOnAxis(t$,t)}},{key:"translateY",value:function(t){return this.translateOnAxis(tK,t)}},{key:"translateZ",value:function(t){return this.translateOnAxis(t0,t)}},{key:"localToWorld",value:function(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(tJ.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(t,e,i){t.isVector3?tY.copy(t):tY.set(t,e,i);var r=this.parent;this.updateWorldMatrix(!0,!1),tZ.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tJ.lookAt(tZ,tY,this.up):tJ.lookAt(tY,tZ,this.up),this.quaternion.setFromRotationMatrix(tJ),r&&(tJ.extractRotation(r.matrixWorld),tX.setFromRotationMatrix(tJ),this.quaternion.premultiply(tX.invert()))}},{key:"add",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",t):t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(t1)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this}},{key:"remove",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var i=this.children.indexOf(t);return -1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(t2)),this}},{key:"removeFromParent",value:function(){var t=this.parent;return null!==t&&t.remove(this),this}},{key:"clear",value:function(){var t;return this.remove.apply(this,function(t){if(Array.isArray(t))return n(t)}(t=this.children)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}},{key:"attach",value:function(t){return this.updateWorldMatrix(!0,!1),tJ.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),tJ.multiply(t.parent.matrixWorld)),t.applyMatrix4(tJ),this.add(t),t.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(t){return this.getObjectByProperty("id",t)}},{key:"getObjectByName",value:function(t){return this.getObjectByProperty("name",t)}},{key:"getObjectByProperty",value:function(t,e){if(this[t]===e)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}}},{key:"getObjectsByProperty",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[t]===e&&i.push(this);for(var r=this.children,n=0,s=r.length;n<s;n++)r[n].getObjectsByProperty(t,e,i);return i}},{key:"getWorldPosition",value:function(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tZ,t,tG),t}},{key:"getWorldScale",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tZ,tQ,t),t}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(t){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverse(t)}},{key:"traverseVisible",value:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}}},{key:"traverseAncestors",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,r=e.length;i<r;i++){var n=e[i];(!0===n.matrixWorldAutoUpdate||!0===t)&&n.updateMatrixWorld(t)}}},{key:"updateWorldMatrix",value:function(t,e){var i=this.parent;if(!0===t&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,n=0,s=r.length;n<s;n++){var a=r[n];!0===a.matrixWorldAutoUpdate&&a.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});var r={};function n(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(function(t){return{boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()}}),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(t),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=n(t.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var a=s.shapes;if(Array.isArray(a))for(var o=0,h=a.length;o<h;o++){var u=a[o];n(t.shapes,u)}else n(t.shapes,a)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(n(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){for(var l=[],c=0,y=this.material.length;c<y;c++)l.push(n(t.materials,this.material[c]));r.material=l}else r.material=n(t.materials,this.material)}if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(var d=0;d<this.animations.length;d++){var m=this.animations[d];r.animations.push(n(t.animations,m))}}if(e){var p=z(t.geometries),v=z(t.materials),x=z(t.textures),g=z(t.images),k=z(t.shapes),b=z(t.skeletons),M=z(t.animations),w=z(t.nodes);p.length>0&&(i.geometries=p),v.length>0&&(i.materials=v),x.length>0&&(i.textures=x),g.length>0&&(i.images=g),k.length>0&&(i.shapes=k),b.length>0&&(i.skeletons=b),M.length>0&&(i.animations=M),w.length>0&&(i.nodes=w)}return i.object=r,i;function z(t){var e=[];for(var i in t){var r=t[i];delete r.metadata,e.push(r)}return e}}},{key:"clone",value:function(t){return new this.constructor().copy(this,t)}},{key:"copy",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var r=t.children[i];this.add(r.clone())}return this}}]),i}(A);t3.DEFAULT_UP=new ti(0,1,0),t3.DEFAULT_MATRIX_AUTO_UPDATE=!0,t3.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var t5=new ti,t4=new ti,t6=new ti,t7=new ti,t9=new ti,t8=new ti,et=new ti,ee=new ti,ei=new ti,er=new ti,en=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ti,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ti,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ti;f(this,t),this.a=e,this.b=i,this.c=r}return m(t,[{key:"set",value:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}},{key:"setFromPointsAndIndices",value:function(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}},{key:"setFromAttributeAndIndices",value:function(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return t5.subVectors(this.c,this.b),t4.subVectors(this.a,this.b),.5*t5.cross(t4).length()}},{key:"getMidpoint",value:function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return t.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,i){return t.getBarycoord(e,this.a,this.b,this.c,i)}},{key:"getInterpolation",value:function(e,i,r,n,s){return t.getInterpolation(e,this.a,this.b,this.c,i,r,n,s)}},{key:"containsPoint",value:function(e){return t.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return t.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(t,e){var i,r,n=this.a,s=this.b,a=this.c;t9.subVectors(s,n),t8.subVectors(a,n),ee.subVectors(t,n);var o=t9.dot(ee),h=t8.dot(ee);if(o<=0&&h<=0)return e.copy(n);ei.subVectors(t,s);var u=t9.dot(ei),l=t8.dot(ei);if(u>=0&&l<=u)return e.copy(s);var c=o*l-u*h;if(c<=0&&o>=0&&u<=0)return i=o/(o-u),e.copy(n).addScaledVector(t9,i);er.subVectors(t,a);var y=t9.dot(er),f=t8.dot(er);if(f>=0&&y<=f)return e.copy(a);var d=y*h-o*f;if(d<=0&&h>=0&&f<=0)return r=h/(h-f),e.copy(n).addScaledVector(t8,r);var m=u*f-y*l;if(m<=0&&l-u>=0&&y-f>=0)return et.subVectors(a,s),r=(l-u)/(l-u+(y-f)),e.copy(s).addScaledVector(et,r);var p=1/(m+d+c);return i=d*p,r=c*p,e.copy(n).addScaledVector(t9,i).addScaledVector(t8,r)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(t,e,i,r){r.subVectors(i,e),t5.subVectors(t,e),r.cross(t5);var n=r.lengthSq();return n>0?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)}},{key:"getBarycoord",value:function(t,e,i,r,n){t5.subVectors(r,e),t4.subVectors(i,e),t6.subVectors(t,e);var s=t5.dot(t5),a=t5.dot(t4),o=t5.dot(t6),h=t4.dot(t4),u=t4.dot(t6),l=s*h-a*a;if(0===l)return n.set(0,0,0),null;var c=1/l,y=(h*o-a*u)*c,f=(s*u-a*o)*c;return n.set(1-y-f,f,y)}},{key:"containsPoint",value:function(t,e,i,r){return null!==this.getBarycoord(t,e,i,r,t7)&&t7.x>=0&&t7.y>=0&&t7.x+t7.y<=1}},{key:"getInterpolation",value:function(t,e,i,r,n,s,a,o){return null===this.getBarycoord(t,e,i,r,t7)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(n,t7.x),o.addScaledVector(s,t7.y),o.addScaledVector(a,t7.z),o)}},{key:"isFrontFacing",value:function(t,e,i,r){return t5.subVectors(i,e),t4.subVectors(t,e),0>t5.cross(t4).dot(r)}}]),t}(),es={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ea={h:0,s:0,l:0},eo={h:0,s:0,l:0};function eh(t,e,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?t+(e-t)*6*i:i<.5?e:i<2/3?t+(e-t)*6*(2/3-i):t}var eu=function(t){function e(t,i,r){return f(this,e),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,i,r)}return m(e,[{key:"set",value:function(t,e,i){return void 0===e&&void 0===i?t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t):this.setRGB(t,e,i),this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,H.toWorkingColorSpace(this,e),this}},{key:"setRGB",value:function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H.workingColorSpace;return this.r=t,this.g=e,this.b=i,H.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H.workingColorSpace;if(t=(t%1+1)%1,e=O(e,0,1),i=O(i,0,1),0===e)this.r=this.g=this.b=i;else{var n=i<=.5?i*(1+e):i+e-i*e,s=2*i-n;this.r=eh(s,n,t+1/3),this.g=eh(s,n,t),this.b=eh(s,n,t-1/3)}return H.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;function i(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){var r,n,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(n[4]),this.setRGB(Math.min(255,parseInt(n[1],10))/255,Math.min(255,parseInt(n[2],10))/255,Math.min(255,parseInt(n[3],10))/255,e);if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(n[4]),this.setRGB(Math.min(100,parseInt(n[1],10))/100,Math.min(100,parseInt(n[2],10))/100,Math.min(100,parseInt(n[3],10))/100,e);break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(n[4]),this.setHSL(parseFloat(n[1])/360,parseFloat(n[2])/100,parseFloat(n[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){var o=r[1],h=o.length;if(3===h)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(6===h)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}},{key:"setColorName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,i=es[t.toLowerCase()];return void 0!==i?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copySRGBToLinear",value:function(t){return this.r=X(t.r),this.g=X(t.g),this.b=X(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=J(t.r),this.g=J(t.g),this.b=J(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return H.fromWorkingColorSpace(el.copy(this),t),65536*Math.round(O(255*el.r,0,255))+256*Math.round(O(255*el.g,0,255))+Math.round(O(255*el.b,0,255))}},{key:"getHexString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return("000000"+this.getHex(t).toString(16)).slice(-6)}},{key:"getHSL",value:function(t){var e,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.workingColorSpace;H.fromWorkingColorSpace(el.copy(this),r);var n=el.r,s=el.g,a=el.b,o=Math.max(n,s,a),h=Math.min(n,s,a),u=(h+o)/2;if(h===o)e=0,i=0;else{var l=o-h;switch(i=u<=.5?l/(o+h):l/(2-o-h),o){case n:e=(s-a)/l+(s<a?6:0);break;case s:e=(a-n)/l+2;break;case a:e=(n-s)/l+4}e/=6}return t.h=e,t.s=i,t.l=u,t}},{key:"getRGB",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.workingColorSpace;return H.fromWorkingColorSpace(el.copy(this),e),t.r=el.r,t.g=el.g,t.b=el.b,t}},{key:"getStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;H.fromWorkingColorSpace(el.copy(this),t);var e=el.r,i=el.g,r=el.b;return t!==b?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(i.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*e),",").concat(Math.round(255*i),",").concat(Math.round(255*r),")")}},{key:"offsetHSL",value:function(t,e,i){return this.getHSL(ea),this.setHSL(ea.h+t,ea.s+e,ea.l+i)}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:"addScalar",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this}},{key:"lerp",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:"lerpColors",value:function(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}},{key:"lerpHSL",value:function(t,e){this.getHSL(ea),t.getHSL(eo);var i=(1-e)*ea.h+e*eo.h,r=(1-e)*ea.s+e*eo.s,n=(1-e)*ea.l+e*eo.l;return this.setHSL(i,r,n),this}},{key:"setFromVector3",value:function(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}},{key:"applyMatrix3",value:function(t){var e=this.r,i=this.g,r=this.b,n=t.elements;return this.r=n[0]*e+n[3]*i+n[6]*r,this.g=n[1]*e+n[4]*i+n[7]*r,this.b=n[2]*e+n[5]*i+n[8]*r,this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:t,value:c().mark(function t(){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.r;case 2:return t.next=4,this.g;case 4:return t.next=6,this.b;case 6:case"end":return t.stop()}},t,this)})}]),e}(Symbol.iterator),el=new eu;eu.NAMES=es;var ec=0,ey=function(t){s(i,t);var e=o(i);function i(){var t;return f(this,i),(t=e.call(this)).isMaterial=!0,Object.defineProperty(h(t),"id",{value:ec++}),t.uuid=B(),t.name="",t.type="Material",t.blending=1,t.side=0,t.vertexColors=!1,t.opacity=1,t.transparent=!1,t.alphaHash=!1,t.blendSrc=204,t.blendDst=205,t.blendEquation=100,t.blendSrcAlpha=null,t.blendDstAlpha=null,t.blendEquationAlpha=null,t.blendColor=new eu(0,0,0),t.blendAlpha=0,t.depthFunc=3,t.depthTest=!0,t.depthWrite=!0,t.stencilWriteMask=255,t.stencilFunc=519,t.stencilRef=0,t.stencilFuncMask=255,t.stencilFail=7680,t.stencilZFail=7680,t.stencilZPass=7680,t.stencilWrite=!1,t.clippingPlanes=null,t.clipIntersection=!1,t.clipShadows=!1,t.shadowSide=null,t.colorWrite=!0,t.precision=null,t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=0,t.dithering=!1,t.alphaToCoverage=!1,t.premultipliedAlpha=!1,t.forceSinglePass=!1,t.visible=!0,t.toneMapped=!0,t.userData={},t.version=0,t._alphaTest=0,t}return m(i,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0===i){console.warn("THREE.Material: parameter '".concat(e,"' has value of undefined."));continue}var r=this[e];if(void 0===r){console.warn("THREE.Material: '".concat(e,"' is not a property of THREE.").concat(this.type,"."));continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var i in t){var r=t[i];delete r.metadata,e.push(r)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),7680!==this.stencilFail&&(i.stencilFail=this.stencilFail),7680!==this.stencilZFail&&(i.stencilZFail=this.stencilZFail),7680!==this.stencilZPass&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),e){var n=r(t.textures),s=r(t.images);n.length>0&&(i.textures=n),s.length>0&&(i.images=s)}return i}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,i=null;if(null!==e){var r=e.length;i=Array(r);for(var n=0;n!==r;++n)i[n]=e[n].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),i}(A),ef=function(t){s(i,t);var e=o(i);function i(t){var r;return f(this,i),(r=e.call(this)).isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new eu(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(t),r}return m(i,[{key:"copy",value:function(t){return r(u(i.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}]),i}(ey),ed=new ti,em=new P,ep=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(f(this,t),Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=i,this.count=void 0!==e?e.length/i:0,this.normalized=r,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=1015,this.version=0}return m(t,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"updateRange",get:function(){return V("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"addUpdateRange",value:function(t,e){this.updateRanges.push({start:t,count:e})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}},{key:"copyAt",value:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var r=0,n=this.itemSize;r<n;r++)this.array[t+r]=e.array[i+r];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var e=0,i=this.count;e<i;e++)em.fromBufferAttribute(this,e),em.applyMatrix3(t),this.setXY(e,em.x,em.y);else if(3===this.itemSize)for(var r=0,n=this.count;r<n;r++)ed.fromBufferAttribute(this,r),ed.applyMatrix3(t),this.setXYZ(r,ed.x,ed.y,ed.z);return this}},{key:"applyMatrix4",value:function(t){for(var e=0,i=this.count;e<i;e++)ed.fromBufferAttribute(this,e),ed.applyMatrix4(t),this.setXYZ(e,ed.x,ed.y,ed.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,i=this.count;e<i;e++)ed.fromBufferAttribute(this,e),ed.applyNormalMatrix(t),this.setXYZ(e,ed.x,ed.y,ed.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,i=this.count;e<i;e++)ed.fromBufferAttribute(this,e),ed.transformDirection(t),this.setXYZ(e,ed.x,ed.y,ed.z);return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"getComponent",value:function(t,e){var i=this.array[t*this.itemSize+e];return this.normalized&&(i=F(i,this.array)),i}},{key:"setComponent",value:function(t,e,i){return this.normalized&&(i=R(i,this.array)),this.array[t*this.itemSize+e]=i,this}},{key:"getX",value:function(t){var e=this.array[t*this.itemSize];return this.normalized&&(e=F(e,this.array)),e}},{key:"setX",value:function(t,e){return this.normalized&&(e=R(e,this.array)),this.array[t*this.itemSize]=e,this}},{key:"getY",value:function(t){var e=this.array[t*this.itemSize+1];return this.normalized&&(e=F(e,this.array)),e}},{key:"setY",value:function(t,e){return this.normalized&&(e=R(e,this.array)),this.array[t*this.itemSize+1]=e,this}},{key:"getZ",value:function(t){var e=this.array[t*this.itemSize+2];return this.normalized&&(e=F(e,this.array)),e}},{key:"setZ",value:function(t,e){return this.normalized&&(e=R(e,this.array)),this.array[t*this.itemSize+2]=e,this}},{key:"getW",value:function(t){var e=this.array[t*this.itemSize+3];return this.normalized&&(e=F(e,this.array)),e}},{key:"setW",value:function(t,e){return this.normalized&&(e=R(e,this.array)),this.array[t*this.itemSize+3]=e,this}},{key:"setXY",value:function(t,e,i){return t*=this.itemSize,this.normalized&&(e=R(e,this.array),i=R(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}},{key:"setXYZ",value:function(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=R(e,this.array),i=R(i,this.array),r=R(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,i,r,n){return t*=this.itemSize,this.normalized&&(e=R(e,this.array),i=R(i,this.array),r=R(r,this.array),n=R(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=n,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}]),t}(),ev=function(t){s(i,t);var e=o(i);function i(t,r,n){return f(this,i),e.call(this,new Uint16Array(t),r,n)}return m(i)}(ep),ex=function(t){s(i,t);var e=o(i);function i(t,r,n){return f(this,i),e.call(this,new Uint32Array(t),r,n)}return m(i)}(ep),eg=function(t){s(i,t);var e=o(i);function i(t,r,n){return f(this,i),e.call(this,new Float32Array(t),r,n)}return m(i)}(ep),ek=0,eb=new tO,eM=new t3,ew=new ti,ez=new ts,eS=new ts,e_=new ti,eA=function(t){s(i,t);var e=o(i);function i(){var t;return f(this,i),(t=e.call(this)).isBufferGeometry=!0,Object.defineProperty(h(t),"id",{value:ek++}),t.uuid=B(),t.name="",t.type="BufferGeometry",t.index=null,t.attributes={},t.morphAttributes={},t.morphTargetsRelative=!1,t.groups=[],t.boundingBox=null,t.boundingSphere=null,t.drawRange={start:0,count:1/0},t.userData={},t}return m(i,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return Array.isArray(t)?this.index=new(!function(t){for(var e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}(t)?ev:ex)(t,1):this.index=t,this}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"setAttribute",value:function(t,e){return this.attributes[t]=e,this}},{key:"deleteAttribute",value:function(t){return delete this.attributes[t],this}},{key:"hasAttribute",value:function(t){return void 0!==this.attributes[t]}},{key:"addGroup",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:i})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:"applyMatrix4",value:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){var r=new I().getNormalMatrix(t);i.applyNormalMatrix(r),i.needsUpdate=!0}var n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(t){return eb.makeRotationFromQuaternion(t),this.applyMatrix4(eb),this}},{key:"rotateX",value:function(t){return eb.makeRotationX(t),this.applyMatrix4(eb),this}},{key:"rotateY",value:function(t){return eb.makeRotationY(t),this.applyMatrix4(eb),this}},{key:"rotateZ",value:function(t){return eb.makeRotationZ(t),this.applyMatrix4(eb),this}},{key:"translate",value:function(t,e,i){return eb.makeTranslation(t,e,i),this.applyMatrix4(eb),this}},{key:"scale",value:function(t,e,i){return eb.makeScale(t,e,i),this.applyMatrix4(eb),this}},{key:"lookAt",value:function(t){return eM.lookAt(t),eM.updateMatrix(),this.applyMatrix4(eM.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ew).negate(),this.translate(ew.x,ew.y,ew.z),this}},{key:"setFromPoints",value:function(t){for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new eg(e,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new ts);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ti(-1/0,-1/0,-1/0),new ti(Infinity,Infinity,Infinity));return}if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var n=e[i];ez.setFromBufferAttribute(n),this.morphTargetsRelative?(e_.addVectors(this.boundingBox.min,ez.min),this.boundingBox.expandByPoint(e_),e_.addVectors(this.boundingBox.max,ez.max),this.boundingBox.expandByPoint(e_)):(this.boundingBox.expandByPoint(ez.min),this.boundingBox.expandByPoint(ez.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new tw);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ti,1/0);return}if(t){var i=this.boundingSphere.center;if(ez.setFromBufferAttribute(t),e)for(var r=0,n=e.length;r<n;r++){var s=e[r];eS.setFromBufferAttribute(s),this.morphTargetsRelative?(e_.addVectors(ez.min,eS.min),ez.expandByPoint(e_),e_.addVectors(ez.max,eS.max),ez.expandByPoint(e_)):(ez.expandByPoint(eS.min),ez.expandByPoint(eS.max))}ez.getCenter(i);for(var a=0,o=0,h=t.count;o<h;o++)e_.fromBufferAttribute(t,o),a=Math.max(a,i.distanceToSquared(e_));if(e)for(var u=0,l=e.length;u<l;u++)for(var c=e[u],y=this.morphTargetsRelative,f=0,d=c.count;f<d;f++)e_.fromBufferAttribute(c,f),y&&(ew.fromBufferAttribute(t,f),e_.add(ew)),a=Math.max(a,i.distanceToSquared(e_));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}var i=t.array,r=e.position.array,n=e.normal.array,s=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ep(new Float32Array(4*a),4));for(var o=this.getAttribute("tangent").array,h=[],u=[],l=0;l<a;l++)h[l]=new ti,u[l]=new ti;var c=new ti,y=new ti,f=new ti,d=new P,m=new P,p=new P,v=new ti,x=new ti,g=this.groups;0===g.length&&(g=[{start:0,count:i.length}]);for(var k=0,b=g.length;k<b;++k)for(var M=g[k],w=M.start,z=M.count,S=w,_=w+z;S<_;S+=3)!function(t,e,i){c.fromArray(r,3*t),y.fromArray(r,3*e),f.fromArray(r,3*i),d.fromArray(s,2*t),m.fromArray(s,2*e),p.fromArray(s,2*i),y.sub(c),f.sub(c),m.sub(d),p.sub(d);var n=1/(m.x*p.y-p.x*m.y);isFinite(n)&&(v.copy(y).multiplyScalar(p.y).addScaledVector(f,-m.y).multiplyScalar(n),x.copy(f).multiplyScalar(m.x).addScaledVector(y,-p.x).multiplyScalar(n),h[t].add(v),h[e].add(v),h[i].add(v),u[t].add(x),u[e].add(x),u[i].add(x))}(i[S+0],i[S+1],i[S+2]);var A=new ti,T=new ti,C=new ti,E=new ti;function B(t){C.fromArray(n,3*t),E.copy(C);var e=h[t];A.copy(e),A.sub(C.multiplyScalar(C.dot(e))).normalize(),T.crossVectors(E,e);var i=T.dot(u[t]);o[4*t]=A.x,o[4*t+1]=A.y,o[4*t+2]=A.z,o[4*t+3]=i<0?-1:1}for(var O=0,F=g.length;O<F;++O)for(var R=g[O],I=R.start,N=R.count,L=I,j=I+N;L<j;L+=3)B(i[L+0]),B(i[L+1]),B(i[L+2])}},{key:"computeVertexNormals",value:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var i=this.getAttribute("normal");if(void 0===i)i=new ep(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(var r=0,n=i.count;r<n;r++)i.setXYZ(r,0,0,0);var s=new ti,a=new ti,o=new ti,h=new ti,u=new ti,l=new ti,c=new ti,y=new ti;if(t)for(var f=0,d=t.count;f<d;f+=3){var m=t.getX(f+0),p=t.getX(f+1),v=t.getX(f+2);s.fromBufferAttribute(e,m),a.fromBufferAttribute(e,p),o.fromBufferAttribute(e,v),c.subVectors(o,a),y.subVectors(s,a),c.cross(y),h.fromBufferAttribute(i,m),u.fromBufferAttribute(i,p),l.fromBufferAttribute(i,v),h.add(c),u.add(c),l.add(c),i.setXYZ(m,h.x,h.y,h.z),i.setXYZ(p,u.x,u.y,u.z),i.setXYZ(v,l.x,l.y,l.z)}else for(var x=0,g=e.count;x<g;x+=3)s.fromBufferAttribute(e,x+0),a.fromBufferAttribute(e,x+1),o.fromBufferAttribute(e,x+2),c.subVectors(o,a),y.subVectors(s,a),c.cross(y),i.setXYZ(x+0,c.x,c.y,c.z),i.setXYZ(x+1,c.x,c.y,c.z),i.setXYZ(x+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}},{key:"normalizeNormals",value:function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)e_.fromBufferAttribute(t,e),e_.normalize(),t.setXYZ(e,e_.x,e_.y,e_.z)}},{key:"toNonIndexed",value:function(){function t(t,e){for(var i=t.array,r=t.itemSize,n=t.normalized,s=new i.constructor(e.length*r),a=0,o=0,h=0,u=e.length;h<u;h++){a=t.isInterleavedBufferAttribute?e[h]*t.data.stride+t.offset:e[h]*r;for(var l=0;l<r;l++)s[o++]=i[a++]}return new ep(s,r,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var e=new i,r=this.index.array,n=this.attributes;for(var s in n){var a=t(n[s],r);e.setAttribute(s,a)}var o=this.morphAttributes;for(var h in o){for(var u=[],l=o[h],c=0,y=l.length;c<y;c++){var f=t(l[c],r);u.push(f)}e.morphAttributes[h]=u}e.morphTargetsRelative=this.morphTargetsRelative;for(var d=this.groups,m=0,p=d.length;m<p;m++){var v=d[m];e.addGroup(v.start,v.count,v.materialIndex)}return e}},{key:"toJSON",value:function(){var t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var n=this.attributes;for(var s in n){var a=n[s];t.data.attributes[s]=a.toJSON(t.data)}var o={},h=!1;for(var u in this.morphAttributes){for(var l=this.morphAttributes[u],c=[],y=0,f=l.length;y<f;y++){var d=l[y];c.push(d.toJSON(t.data))}c.length>0&&(o[u]=c,h=!0)}h&&(t.data.morphAttributes=o,t.data.morphTargetsRelative=this.morphTargetsRelative);var m=this.groups;m.length>0&&(t.data.groups=JSON.parse(JSON.stringify(m)));var p=this.boundingSphere;return null!==p&&(t.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),t}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone(e));var r=t.attributes;for(var n in r){var s=r[n];this.setAttribute(n,s.clone(e))}var a=t.morphAttributes;for(var o in a){for(var h=[],u=a[o],l=0,c=u.length;l<c;l++)h.push(u[l].clone(e));this.morphAttributes[o]=h}this.morphTargetsRelative=t.morphTargetsRelative;for(var y=t.groups,f=0,d=y.length;f<d;f++){var m=y[f];this.addGroup(m.start,m.count,m.materialIndex)}var p=t.boundingBox;null!==p&&(this.boundingBox=p.clone());var v=t.boundingSphere;return null!==v&&(this.boundingSphere=v.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),i}(A),eT=new tO,eC=new tB,eE=new tw,eB=new ti,eO=new ti,eF=new ti,eR=new ti,eP=new ti,eI=new ti,eN=new P,eL=new P,ej=new P,eV=new ti,eW=new ti,eq=new ti,eU=new ti,eD=new ti,eH=function(t){s(i,t);var e=o(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new eA,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ef;return f(this,i),(t=e.call(this)).isMesh=!0,t.type="Mesh",t.geometry=r,t.material=n,t.updateMorphTargets(),t}return m(i,[{key:"copy",value:function(t,e){return r(u(i.prototype),"copy",this).call(this,t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}},{key:"updateMorphTargets",value:function(){var t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){var i=t[e[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,n=i.length;r<n;r++){var s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}},{key:"getVertexPosition",value:function(t,e){var i=this.geometry,r=i.attributes.position,n=i.morphAttributes.position,s=i.morphTargetsRelative;e.fromBufferAttribute(r,t);var a=this.morphTargetInfluences;if(n&&a){eI.set(0,0,0);for(var o=0,h=n.length;o<h;o++){var u=a[o],l=n[o];0!==u&&(eP.fromBufferAttribute(l,t),s?eI.addScaledVector(eP,u):eI.addScaledVector(eP.sub(e),u))}e.add(eI)}return e}},{key:"raycast",value:function(t,e){var i=this.geometry,r=this.material,n=this.matrixWorld;if(void 0!==r){if(null===i.boundingSphere&&i.computeBoundingSphere(),eE.copy(i.boundingSphere),eE.applyMatrix4(n),eC.copy(t.ray).recast(t.near),!1===eE.containsPoint(eC.origin)&&(null===eC.intersectSphere(eE,eB)||eC.origin.distanceToSquared(eB)>Math.pow(t.far-t.near,2))||(eT.copy(n).invert(),eC.copy(t.ray).applyMatrix4(eT),null!==i.boundingBox&&!1===eC.intersectsBox(i.boundingBox)))return;this._computeIntersections(t,e,eC)}}},{key:"_computeIntersections",value:function(t,e,i){var r,n=this.geometry,s=this.material,a=n.index,o=n.attributes.position,h=n.attributes.uv,u=n.attributes.uv1,l=n.attributes.normal,c=n.groups,y=n.drawRange;if(null!==a){if(Array.isArray(s))for(var f=0,d=c.length;f<d;f++)for(var m=c[f],p=s[m.materialIndex],v=Math.max(m.start,y.start),x=Math.min(a.count,Math.min(m.start+m.count,y.start+y.count)),g=v;g<x;g+=3)(r=eX(this,p,t,i,h,u,l,a.getX(g),a.getX(g+1),a.getX(g+2)))&&(r.faceIndex=Math.floor(g/3),r.face.materialIndex=m.materialIndex,e.push(r));else for(var k=Math.max(0,y.start),b=Math.min(a.count,y.start+y.count),M=k;M<b;M+=3)(r=eX(this,s,t,i,h,u,l,a.getX(M),a.getX(M+1),a.getX(M+2)))&&(r.faceIndex=Math.floor(M/3),e.push(r))}else if(void 0!==o){if(Array.isArray(s))for(var w=0,z=c.length;w<z;w++)for(var S=c[w],_=s[S.materialIndex],A=Math.max(S.start,y.start),T=Math.min(o.count,Math.min(S.start+S.count,y.start+y.count)),C=A;C<T;C+=3)(r=eX(this,_,t,i,h,u,l,C,C+1,C+2))&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=S.materialIndex,e.push(r));else for(var E=Math.max(0,y.start),B=Math.min(o.count,y.start+y.count),O=E;O<B;O+=3)(r=eX(this,s,t,i,h,u,l,O,O+1,O+2))&&(r.faceIndex=Math.floor(O/3),e.push(r))}}}]),i}(t3);function eX(t,e,i,r,n,s,a,o,h,u){t.getVertexPosition(o,eO),t.getVertexPosition(h,eF),t.getVertexPosition(u,eR);var l=function(t,e,i,r,n,s,a,o){if(null===(1===e.side?r.intersectTriangle(a,s,n,!0,o):r.intersectTriangle(n,s,a,0===e.side,o)))return null;eD.copy(o),eD.applyMatrix4(t.matrixWorld);var h=i.ray.origin.distanceTo(eD);return h<i.near||h>i.far?null:{distance:h,point:eD.clone(),object:t}}(t,e,i,r,eO,eF,eR,eU);if(l){n&&(eN.fromBufferAttribute(n,o),eL.fromBufferAttribute(n,h),ej.fromBufferAttribute(n,u),l.uv=en.getInterpolation(eU,eO,eF,eR,eN,eL,ej,new P)),s&&(eN.fromBufferAttribute(s,o),eL.fromBufferAttribute(s,h),ej.fromBufferAttribute(s,u),l.uv1=en.getInterpolation(eU,eO,eF,eR,eN,eL,ej,new P),l.uv2=l.uv1),a&&(eV.fromBufferAttribute(a,o),eW.fromBufferAttribute(a,h),eq.fromBufferAttribute(a,u),l.normal=en.getInterpolation(eU,eO,eF,eR,eV,eW,eq,new ti),l.normal.dot(r.direction)>0&&l.normal.multiplyScalar(-1));var c={a:o,b:h,c:u,normal:new ti,materialIndex:0};en.getNormal(eO,eF,eR,c.normal),l.face=c}return l}var eJ=function(t){s(i,t);var e=o(i);function i(t){var r;return f(this,i),(r=e.call(this)).isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.forceSinglePass=!0,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==t&&r.setValues(t),r}return m(i,[{key:"copy",value:function(t){return r(u(i.prototype),"copy",this).call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=function(t){var e={};for(var i in t)for(var r in e[i]={},t[i]){var n=t[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][r]=null):e[i][r]=n.clone():Array.isArray(n)?e[i][r]=n.slice():e[i][r]=n}return e}(t.uniforms),this.uniformsGroups=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}},{key:"toJSON",value:function(t){var e=r(u(i.prototype),"toJSON",this).call(this,t);for(var n in e.glslVersion=this.glslVersion,e.uniforms={},this.uniforms){var s=this.uniforms[n].value;s&&s.isTexture?e.uniforms[n]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[n]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[n]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[n]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[n]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[n]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[n]={type:"m4",value:s.toArray()}:e.uniforms[n]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(e.extensions=a),e}}]),i}(ey),eY=function(t){s(i,t);var e=o(i);function i(){var t;return f(this,i),(t=e.call(this)).isCamera=!0,t.type="Camera",t.matrixWorldInverse=new tO,t.projectionMatrix=new tO,t.projectionMatrixInverse=new tO,t.coordinateSystem=2e3,t}return m(i,[{key:"copy",value:function(t,e){return r(u(i.prototype),"copy",this).call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}},{key:"getWorldDirection",value:function(t){return r(u(i.prototype),"getWorldDirection",this).call(this,t).negate()}},{key:"updateMatrixWorld",value:function(t){r(u(i.prototype),"updateMatrixWorld",this).call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(t,e){r(u(i.prototype),"updateWorldMatrix",this).call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),i}(t3),eZ=new ti,eG=new P,eQ=new P,e$=function(t){s(i,t);var e=o(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return f(this,i),(t=e.call(this)).isPerspectiveCamera=!0,t.type="PerspectiveCamera",t.fov=r,t.zoom=1,t.near=s,t.far=a,t.focus=10,t.aspect=n,t.view=null,t.filmGauge=35,t.filmOffset=0,t.updateProjectionMatrix(),t}return m(i,[{key:"copy",value:function(t,e){return r(u(i.prototype),"copy",this).call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}},{key:"setFocalLength",value:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*E*Math.atan(e),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var t=Math.tan(.5*C*this.fov);return .5*this.getFilmHeight()/t}},{key:"getEffectiveFOV",value:function(){return 2*E*Math.atan(Math.tan(.5*C*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"getViewBounds",value:function(t,e,i){eZ.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(eZ.x,eZ.y).multiplyScalar(-t/eZ.z),eZ.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(eZ.x,eZ.y).multiplyScalar(-t/eZ.z)}},{key:"getViewSize",value:function(t,e){return this.getViewBounds(t,eG,eQ),e.subVectors(eQ,eG)}},{key:"setViewOffset",value:function(t,e,i,r,n,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=this.near,e=t*Math.tan(.5*C*this.fov)/this.zoom,i=2*e,r=this.aspect*i,n=-.5*r,s=this.view;if(null!==this.view&&this.view.enabled){var a=s.fullWidth,o=s.fullHeight;n+=s.offsetX*r/a,e-=s.offsetY*i/o,r*=s.width/a,i*=s.height/o}var h=this.filmOffset;0!==h&&(n+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var e=r(u(i.prototype),"toJSON",this).call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}]),i}(eY),eK=new ti,e0=new ti,e1=new I,e2=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ti(1,0,0),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,t),this.isPlane=!0,this.normal=e,this.constant=i}return m(t,[{key:"set",value:function(t,e){return this.normal.copy(t),this.constant=e,this}},{key:"setComponents",value:function(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(t,e,i){var r=eK.subVectors(i,e).cross(e0.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}},{key:"intersectLine",value:function(t,e){var i=t.delta(eK),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;var n=-(t.start.dot(this.normal)+this.constant)/r;return n<0||n>1?null:e.copy(t.start).addScaledVector(i,n)}},{key:"intersectsLine",value:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return t.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,e){var i=e||e1.getNormalMatrix(t),r=this.coplanarPoint(eK).applyMatrix4(t),n=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(n),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),t}(),e3=new tw,e5=new ti,e4=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e2,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new e2,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new e2,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new e2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new e2;f(this,t),this.planes=[e,i,r,n,s,a]}return m(t,[{key:"set",value:function(t,e,i,r,n,s){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(n),a[5].copy(s),this}},{key:"copy",value:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this}},{key:"setFromProjectionMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,i=this.planes,r=t.elements,n=r[0],s=r[1],a=r[2],o=r[3],h=r[4],u=r[5],l=r[6],c=r[7],y=r[8],f=r[9],d=r[10],m=r[11],p=r[12],v=r[13],x=r[14],g=r[15];if(i[0].setComponents(o-n,c-h,m-y,g-p).normalize(),i[1].setComponents(o+n,c+h,m+y,g+p).normalize(),i[2].setComponents(o+s,c+u,m+f,g+v).normalize(),i[3].setComponents(o-s,c-u,m-f,g-v).normalize(),i[4].setComponents(o-a,c-l,m-d,g-x).normalize(),2e3===e)i[5].setComponents(o+a,c+l,m+d,g+x).normalize();else if(2001===e)i[5].setComponents(a,l,d,x).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}},{key:"intersectsObject",value:function(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),e3.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{var e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),e3.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(e3)}},{key:"intersectsSprite",value:function(t){return e3.center.set(0,0,0),e3.radius=.7071067811865476,e3.applyMatrix4(t.matrixWorld),this.intersectsSphere(e3)}},{key:"intersectsSphere",value:function(t){for(var e=this.planes,i=t.center,r=-t.radius,n=0;n<6;n++)if(e[n].distanceToPoint(i)<r)return!1;return!0}},{key:"intersectsBox",value:function(t){for(var e=this.planes,i=0;i<6;i++){var r=e[i];if(e5.x=r.normal.x>0?t.max.x:t.min.x,e5.y=r.normal.y>0?t.max.y:t.min.y,e5.z=r.normal.z>0?t.max.z:t.min.z,0>r.distanceToPoint(e5))return!1}return!0}},{key:"containsPoint",value:function(t){for(var e=this.planes,i=0;i<6;i++)if(0>e[i].distanceToPoint(t))return!1;return!0}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),t}(),e6=function(t){s(i,t);var e=o(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;f(this,i),(t=e.call(this)).type="PlaneGeometry",t.parameters={width:r,height:n,widthSegments:s,heightSegments:a};for(var o=r/2,h=n/2,u=Math.floor(s),l=Math.floor(a),c=u+1,y=l+1,d=r/u,m=n/l,p=[],v=[],x=[],g=[],k=0;k<y;k++)for(var b=k*m-h,M=0;M<c;M++){var w=M*d-o;v.push(w,-b,0),x.push(0,0,1),g.push(M/u),g.push(1-k/l)}for(var z=0;z<l;z++)for(var S=0;S<u;S++){var _=S+c*z,A=S+c*(z+1),T=S+1+c*(z+1),C=S+1+c*z;p.push(_,A,C),p.push(A,T,C)}return t.setIndex(p),t.setAttribute("position",new eg(v,3)),t.setAttribute("normal",new eg(x,3)),t.setAttribute("uv",new eg(g,2)),t}return m(i,[{key:"copy",value:function(t){return r(u(i.prototype),"copy",this).call(this,t),this.parameters=Object.assign({},t.parameters),this}}],[{key:"fromJSON",value:function(t){return new i(t.width,t.height,t.widthSegments,t.heightSegments)}}]),i}(eA);new(function(t){s(i,t);var e=o(i);function i(t,r,n,s,a,o,h,u,l,c){var y;if(f(this,i),1026!==(c=void 0!==c?c:1026)&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===n&&1026===c&&(n=1014),void 0===n&&1027===c&&(n=1020),(y=e.call(this,null,s,a,o,h,u,c,n,l)).isDepthTexture=!0,y.image={width:t,height:r},y.magFilter=void 0!==h?h:1003,y.minFilter=void 0!==u?u:1003,y.flipY=!1,y.generateMipmaps=!1,y.compareFunction=null,y}return m(i,[{key:"copy",value:function(t){return r(u(i.prototype),"copy",this).call(this,t),this.compareFunction=t.compareFunction,this}},{key:"toJSON",value:function(t){var e=r(u(i.prototype),"toJSON",this).call(this,t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}]),i}(K))(1,1).compareFunction=515;var e7=function(t){s(i,t);var e=o(i);function i(){var t;return f(this,i),(t=e.call(this)).isGroup=!0,t.type="Group",t}return m(i)}(t3),e9=function(){function t(e,i){f(this,t),this.isInterleavedBuffer=!0,this.array=e,this.stride=i,this.count=void 0!==e?e.length/i:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=B()}return m(t,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"updateRange",get:function(){return V("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"addUpdateRange",value:function(t,e){this.updateRanges.push({start:t,count:e})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,i){t*=this.stride,i*=e.stride;for(var r=0,n=this.stride;r<n;r++)this.array[t+r]=e.array[i+r];return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"clone",value:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=B()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"toJSON",value:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=B()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),t}(),e8=new ti,it=function(){function t(e,i,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];f(this,t),this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=i,this.offset=r,this.normalized=n}return m(t,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(t){this.data.needsUpdate=t}},{key:"applyMatrix4",value:function(t){for(var e=0,i=this.data.count;e<i;e++)e8.fromBufferAttribute(this,e),e8.applyMatrix4(t),this.setXYZ(e,e8.x,e8.y,e8.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,i=this.count;e<i;e++)e8.fromBufferAttribute(this,e),e8.applyNormalMatrix(t),this.setXYZ(e,e8.x,e8.y,e8.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,i=this.count;e<i;e++)e8.fromBufferAttribute(this,e),e8.transformDirection(t),this.setXYZ(e,e8.x,e8.y,e8.z);return this}},{key:"getComponent",value:function(t,e){var i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=F(i,this.array)),i}},{key:"setComponent",value:function(t,e,i){return this.normalized&&(i=R(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}},{key:"setX",value:function(t,e){return this.normalized&&(e=R(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}},{key:"setY",value:function(t,e){return this.normalized&&(e=R(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}},{key:"setZ",value:function(t,e){return this.normalized&&(e=R(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}},{key:"setW",value:function(t,e){return this.normalized&&(e=R(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}},{key:"getX",value:function(t){var e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=F(e,this.array)),e}},{key:"getY",value:function(t){var e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=F(e,this.array)),e}},{key:"getZ",value:function(t){var e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=F(e,this.array)),e}},{key:"getW",value:function(t){var e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=F(e,this.array)),e}},{key:"setXY",value:function(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=R(e,this.array),i=R(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}},{key:"setXYZ",value:function(t,e,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=R(e,this.array),i=R(i,this.array),r=R(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,i,r,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=R(e,this.array),i=R(i,this.array),r=R(r,this.array),n=R(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=n,this}},{key:"clone",value:function(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var i=[],r=0;r<this.count;r++)for(var n=r*this.data.stride+this.offset,s=0;s<this.itemSize;s++)i.push(this.data.array[n+s]);return new ep(new this.array.constructor(i),this.itemSize,this.normalized)}},{key:"toJSON",value:function(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var e=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,n=0;n<this.itemSize;n++)e.push(this.data.array[r+n]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}]),t}(),ie=function(t){s(i,t);var e=o(i);function i(t,r){var n;return f(this,i),(n=e.call(this,{width:t,height:r})).isFramebufferTexture=!0,n.magFilter=1003,n.minFilter=1003,n.generateMipmaps=!1,n.needsUpdate=!0,n}return m(i)}(K),ii=function(t){s(i,t);var e=o(i);function i(t){var r;return f(this,i),(r=e.call(this,t)).isRawShaderMaterial=!0,r.type="RawShaderMaterial",r}return m(i)}(eJ),ir={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},is=new(m(function t(e,i,r){f(this,t);var n=this,s=!1,a=0,o=0,h=void 0,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=i,this.onError=r,this.itemStart=function(t){o++,!1===s&&void 0!==n.onStart&&n.onStart(t,a,o),s=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(s=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return h?h(t):t},this.setURLModifier=function(t){return h=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){var e=u.indexOf(t);return -1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(var e=0,i=u.length;e<i;e+=2){var r=u[e],n=u[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return n}return null}})),ia=function(){function t(e){f(this,t),this.manager=void 0!==e?e:is,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return m(t,[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,e){var i=this;return new Promise(function(r,n){i.load(t,r,e,n)})}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}}]),t}();ia.DEFAULT_MATERIAL_NAME="__DEFAULT";var io=function(t){s(i,t);var e=o(i);function i(t){return f(this,i),e.call(this,t)}return m(i,[{key:"load",value:function(t,e,i,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n=this,s=ir.get(t);if(void 0!==s)return n.manager.itemStart(t),setTimeout(function(){e&&e(s),n.manager.itemEnd(t)},0),s;var a=L("img");function o(){u(),ir.add(t,this),e&&e(this),n.manager.itemEnd(t)}function h(e){u(),r&&r(e),n.manager.itemError(t),n.manager.itemEnd(t)}function u(){a.removeEventListener("load",o,!1),a.removeEventListener("error",h,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",h,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),n.manager.itemStart(t),a.src=t,a}}]),i}(ia),ih=function(t){s(i,t);var e=o(i);function i(t){return f(this,i),e.call(this,t)}return m(i,[{key:"load",value:function(t,e,i,r){var n=new K,s=new io(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(t){n.image=t,n.needsUpdate=!0,void 0!==e&&e(n)},i,r),n}}]),i}(ia),iu=function(t){s(i,t);var e=o(i);function i(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return f(this,i),(r=e.call(this)).isLight=!0,r.type="Light",r.color=new eu(t),r.intensity=n,r}return m(i,[{key:"dispose",value:function(){}},{key:"copy",value:function(t,e){return r(u(i.prototype),"copy",this).call(this,t,e),this.color.copy(t.color),this.intensity=t.intensity,this}},{key:"toJSON",value:function(t){var e=r(u(i.prototype),"toJSON",this).call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}]),i}(t3),il=new tO,ic=new ti,iy=new ti,id=function(){function t(e){f(this,t),this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new P(512,512),this.map=null,this.mapPass=null,this.matrix=new tO,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new e4,this._frameExtents=new P(1,1),this._viewportCount=1,this._viewports=[new tt(0,0,1,1)]}return m(t,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(t){var e=this.camera,i=this.matrix;ic.setFromMatrixPosition(t.matrixWorld),e.position.copy(ic),iy.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(iy),e.updateMatrixWorld(),il.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(il),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(il)}},{key:"getViewport",value:function(t){return this._viewports[t]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"toJSON",value:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}]),t}(),im=new tO,ip=new ti,iv=new ti,ix=function(t){s(i,t);var e=o(i);function i(){var t;return f(this,i),(t=e.call(this,new e$(90,1,.5,500))).isPointLightShadow=!0,t._frameExtents=new P(4,2),t._viewportCount=6,t._viewports=[new tt(2,1,1,1),new tt(0,1,1,1),new tt(3,1,1,1),new tt(1,1,1,1),new tt(3,0,1,1),new tt(1,0,1,1)],t._cubeDirections=[new ti(1,0,0),new ti(-1,0,0),new ti(0,0,1),new ti(0,0,-1),new ti(0,1,0),new ti(0,-1,0)],t._cubeUps=[new ti(0,1,0),new ti(0,1,0),new ti(0,1,0),new ti(0,1,0),new ti(0,0,1),new ti(0,0,-1)],t}return m(i,[{key:"updateMatrices",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.camera,r=this.matrix,n=t.distance||i.far;n!==i.far&&(i.far=n,i.updateProjectionMatrix()),ip.setFromMatrixPosition(t.matrixWorld),i.position.copy(ip),iv.copy(i.position),iv.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(iv),i.updateMatrixWorld(),r.makeTranslation(-ip.x,-ip.y,-ip.z),im.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(im)}}]),i}(id),ig=function(t){s(i,t);var e=o(i);function i(t,r){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return f(this,i),(n=e.call(this,t,r)).isPointLight=!0,n.type="PointLight",n.distance=s,n.decay=a,n.shadow=new ix,n}return m(i,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t,e){return r(u(i.prototype),"copy",this).call(this,t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}]),i}(iu),ik=new P,ib=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new P(Infinity,Infinity),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new P(-1/0,-1/0);f(this,t),this.isBox2=!0,this.min=e,this.max=i}return m(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var i=ik.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x)&&!(t.x>this.max.x)&&!(t.y<this.min.y)&&!(t.y>this.max.y)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x)&&!(t.min.x>this.max.x)&&!(t.max.y<this.min.y)&&!(t.min.y>this.max.y)}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return this.clampPoint(t,ik).distanceTo(t)}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"161"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="161")}}]);